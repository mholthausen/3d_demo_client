define(["exports","./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartesian2-bddc1162"],(function(t,a,i,n,e){"use strict";function s(t,a,i,n,e,s,r){var h;return(1-(i=(h=t)*(i=i)*(4+h*(4-3*i))/16))*t*a*(n+i*e*(r+i*s*(2*r*r-1)))}var r=new e.Cartesian3,h=new e.Cartesian3;function o(t,a,i,o){var d,c,u,M,l,g,_,p,f,m,v,C,H,O,S,q,U,b,w;e.Cartesian3.normalize(o.cartographicToCartesian(a,h),r),e.Cartesian3.normalize(o.cartographicToCartesian(i,h),h),function(t,a,i,e,r,h,o){var d=(a-i)/a,c=h-e,u=(e=Math.atan((1-d)*Math.tan(r)),r=Math.atan((1-d)*Math.tan(o)),o=Math.cos(e),e=Math.sin(e),Math.cos(r)),M=o*u,l=o*(r=Math.sin(r)),g=e*r,_=e*u,p=c,f=n.CesiumMath.TWO_PI,m=Math.cos(p),v=Math.sin(p);do{m=Math.cos(p),v=Math.sin(p);var C,H,O=l-_*m,S=Math.sqrt(u*u*v*v+O*O),q=g+M*m,U=Math.atan2(S,q),b=(f=p,q-2*g/(H=0===S?(C=0,1):1-(C=M*v/S)*C))}while(isNaN(b)&&(b=0),p=c+s(d,C,H,U,S,q,b),Math.abs(p-f)>n.CesiumMath.EPSILON12);e=i*(1+(r=H*(a*a-i*i)/(i*i))*(4096+r*(r*(320-175*r)-768))/16384)*(U-(e=r*(256+r*(r*(74-47*r)-128))/1024)*S*(b+e*(q*(2*(a=b*b)-1)-e*b*(4*S*S-3)*(4*a-3)/6)/4)),a=Math.atan2(u*v,l-_*m),o=Math.atan2(o*v,l*m-_),t._distance=e,t._startHeading=a,t._endHeading=o,t._uSquared=r}(t,o.maximumRadius,o.minimumRadius,a.longitude,a.latitude,i.longitude,i.latitude),t._start=e.Cartographic.clone(a,t._start),t._end=e.Cartographic.clone(i,t._end),t._start.height=0,t._end.height=0,c=(d=t)._uSquared,l=((u=d._ellipsoid.maximumRadius)-(M=d._ellipsoid.minimumRadius))/u,g=Math.cos(d._startHeading),_=Math.sin(d._startHeading),p=(1-l)*Math.tan(d._start.latitude),m=(f=1/Math.sqrt(1+p*p))*p,v=Math.atan2(p,g),O=1-(H=(C=f*_)*C),S=Math.sqrt(O),b=1-3*(q=c/4)+35*(U=q*q)/4,w=1-5*q,c=(i=1+q-3*U/4+5*(o=U*q)/4-175*(a=U*U)/64)*v-(t=1-q+15*U/8-35*o/8)*Math.sin(2*v)*q/2-b*Math.sin(4*v)*U/16-w*Math.sin(6*v)*o/48-5*Math.sin(8*v)*a/512,(d=d._constants).a=u,d.b=M,d.f=l,d.cosineHeading=g,d.sineHeading=_,d.tanU=p,d.cosineU=f,d.sineU=m,d.sigma=v,d.sineAlpha=C,d.sineSquaredAlpha=H,d.cosineSquaredAlpha=O,d.cosineAlpha=S,d.u2Over4=q,d.u4Over16=U,d.u6Over64=o,d.u8Over256=a,d.a0=i,d.a1=t,d.a2=b,d.a3=w,d.distanceRatio=c}function d(t,i,n){n=a.defaultValue(n,e.Ellipsoid.WGS84),this._ellipsoid=n,this._start=new e.Cartographic,this._end=new e.Cartographic,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,a.defined(t)&&a.defined(i)&&o(this,t,i,n)}Object.defineProperties(d.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}}),d.prototype.setEndPoints=function(t,a){o(this,t,a,this._ellipsoid)},d.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},d.prototype.interpolateUsingSurfaceDistance=function(t,i){var n=this._constants,r=n.distanceRatio+t/n.b,h=Math.cos(2*r),o=Math.cos(4*r),d=Math.cos(6*r),c=Math.sin(2*r),u=Math.sin(4*r),M=Math.sin(6*r),l=Math.sin(8*r),g=r*(m=r*r),_=n.u8Over256,p=n.u2Over4,f=n.u6Over64,m=2*g*_*h/3+r*(1-p+7*(t=n.u4Over16)/4-15*f/4+579*_/64-(t-15*f/4+187*_/16)*h-(5*f/4-115*_/16)*o-29*_*d/16)+(p/2-t+71*f/32-85*_/16)*c+(5*t/16-5*f/4+383*_/96)*u-m*((f-11*_/2)*c+5*_*u/2)+(29*f/96-29*_/16)*M+539*_*l/1536;return c=Math.asin(Math.sin(m)*n.cosineAlpha),u=Math.atan(n.a/n.b*Math.tan(c)),m-=n.sigma,f=Math.cos(2*n.sigma+m),M=Math.sin(m),_=Math.cos(m),l=n.cosineU*_,c=n.sineU*M,f=Math.atan2(M*n.sineHeading,l-c*n.cosineHeading)-s(n.f,n.sineAlpha,n.cosineSquaredAlpha,m,M,_,f),a.defined(i)?(i.longitude=this._start.longitude+f,i.latitude=u,i.height=0,i):new e.Cartographic(this._start.longitude+f,u,0)},t.EllipsoidGeodesic=d}));