define(["exports","./when-54c2dc71","./Check-6c0211bc","./Cartesian2-bddc1162","./Transforms-6f81ad4c","./WebGLConstants-76bb35d1"],(function(t,e,n,r,a,i){"use strict";var u=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function o(t,n,r,a){this[0]=e.defaultValue(t,0),this[1]=e.defaultValue(r,0),this[2]=e.defaultValue(n,0),this[3]=e.defaultValue(a,0)}o.packedLength=4,o.pack=function(t,n,r){return r=e.defaultValue(r,0),n[r++]=t[0],n[r++]=t[1],n[r++]=t[2],n[r++]=t[3],n},o.unpack=function(t,n,r){return n=e.defaultValue(n,0),e.defined(r)||(r=new o),r[0]=t[n++],r[1]=t[n++],r[2]=t[n++],r[3]=t[n++],r},o.clone=function(t,n){if(e.defined(t))return e.defined(n)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):new o(t[0],t[2],t[1],t[3])},o.fromArray=function(t,n,r){return n=e.defaultValue(n,0),e.defined(r)||(r=new o),r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r},o.fromColumnMajorArray=function(t,e){return o.clone(t,e)},o.fromRowMajorArray=function(t,n){return e.defined(n)?(n[0]=t[0],n[1]=t[2],n[2]=t[1],n[3]=t[3],n):new o(t[0],t[1],t[2],t[3])},o.fromScale=function(t,n){return e.defined(n)?(n[0]=t.x,n[1]=0,n[2]=0,n[3]=t.y,n):new o(t.x,0,0,t.y)},o.fromUniformScale=function(t,n){return e.defined(n)?(n[0]=t,n[1]=0,n[2]=0,n[3]=t,n):new o(t,0,0,t)},o.fromRotation=function(t,n){var r=Math.cos(t);return t=Math.sin(t),e.defined(n)?(n[0]=r,n[1]=t,n[2]=-t,n[3]=r,n):new o(r,-t,t,r)},o.toArray=function(t,n){return e.defined(n)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):[t[0],t[1],t[2],t[3]]},o.getElementIndex=function(t,e){return 2*t+e},o.getColumn=function(t,e,n){e=t[r=2*e];var r=t[1+r];return n.x=e,n.y=r,n},o.setColumn=function(t,e,n,r){return e*=2,(r=o.clone(t,r))[e]=n.x,r[1+e]=n.y,r},o.getRow=function(t,e,n){var r=t[e];return e=t[e+2],n.x=r,n.y=e,n},o.setRow=function(t,e,n,r){return(r=o.clone(t,r))[e]=n.x,r[e+2]=n.y,r};var s=new r.Cartesian2;o.getScale=function(t,e){return e.x=r.Cartesian2.magnitude(r.Cartesian2.fromElements(t[0],t[1],s)),e.y=r.Cartesian2.magnitude(r.Cartesian2.fromElements(t[2],t[3],s)),e};var f=new r.Cartesian2;o.getMaximumScale=function(t){return o.getScale(t,f),r.Cartesian2.maximumComponent(f)},o.multiply=function(t,e,n){var r=t[0]*e[0]+t[2]*e[1],a=t[0]*e[2]+t[2]*e[3],i=t[1]*e[0]+t[3]*e[1];return e=t[1]*e[2]+t[3]*e[3],n[0]=r,n[1]=i,n[2]=a,n[3]=e,n},o.add=function(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n},o.subtract=function(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n},o.multiplyByVector=function(t,e,n){var r=t[0]*e.x+t[2]*e.y;return e=t[1]*e.x+t[3]*e.y,n.x=r,n.y=e,n},o.multiplyByScalar=function(t,e,n){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n},o.multiplyByScale=function(t,e,n){return n[0]=t[0]*e.x,n[1]=t[1]*e.x,n[2]=t[2]*e.y,n[3]=t[3]*e.y,n},o.negate=function(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.transpose=function(t,e){var n=t[0],r=t[2],a=t[1];return t=t[3],e[0]=n,e[1]=r,e[2]=a,e[3]=t,e},o.abs=function(t,e){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e},o.equals=function(t,n){return t===n||e.defined(t)&&e.defined(n)&&t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},o.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]},o.equalsEpsilon=function(t,n,r){return r=e.defaultValue(r,0),t===n||e.defined(t)&&e.defined(n)&&Math.abs(t[0]-n[0])<=r&&Math.abs(t[1]-n[1])<=r&&Math.abs(t[2]-n[2])<=r&&Math.abs(t[3]-n[3])<=r},o.IDENTITY=Object.freeze(new o(1,0,0,1)),o.ZERO=Object.freeze(new o(0,0,0,0)),o.COLUMN0ROW0=0,o.COLUMN0ROW1=1,o.COLUMN1ROW0=2,o.COLUMN1ROW1=3,Object.defineProperties(o.prototype,{length:{get:function(){return o.packedLength}}}),o.prototype.clone=function(t){return o.clone(this,t)},o.prototype.equals=function(t){return o.equals(this,t)},o.prototype.equalsEpsilon=function(t,e){return o.equalsEpsilon(this,t,e)},o.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var c={POINTS:i.WebGLConstants.POINTS,LINES:i.WebGLConstants.LINES,LINE_LOOP:i.WebGLConstants.LINE_LOOP,LINE_STRIP:i.WebGLConstants.LINE_STRIP,TRIANGLES:i.WebGLConstants.TRIANGLES,TRIANGLE_STRIP:i.WebGLConstants.TRIANGLE_STRIP,TRIANGLE_FAN:i.WebGLConstants.TRIANGLE_FAN,validate:function(t){return t===c.POINTS||t===c.LINES||t===c.LINE_LOOP||t===c.LINE_STRIP||t===c.TRIANGLES||t===c.TRIANGLE_STRIP||t===c.TRIANGLE_FAN}},l=Object.freeze(c);function d(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT),this.attributes=t.attributes,this.indices=t.indices,this.primitiveType=e.defaultValue(t.primitiveType,l.TRIANGLES),this.boundingSphere=t.boundingSphere,this.geometryType=e.defaultValue(t.geometryType,u.NONE),this.boundingSphereCV=t.boundingSphereCV,this.offsetAttribute=t.offsetAttribute}d.computeNumberOfVertices=function(t){var n,r,a=-1;for(n in t.attributes)t.attributes.hasOwnProperty(n)&&e.defined(t.attributes[n])&&e.defined(t.attributes[n].values)&&(a=(r=t.attributes[n]).values.length/r.componentsPerAttribute);return a};var y=new r.Cartographic,m=new r.Cartesian3,p=new a.Matrix4,h=[new r.Cartographic,new r.Cartographic,new r.Cartographic],N=[new r.Cartesian2,new r.Cartesian2,new r.Cartesian2],I=[new r.Cartesian2,new r.Cartesian2,new r.Cartesian2],C=new r.Cartesian3,b=new a.Quaternion,T=new a.Matrix4,E=new o;d._textureCoordinateRotationPoints=function(t,e,n,i){var u=r.Rectangle.center(i,y),s=r.Cartographic.toCartesian(u,n,m),f=(u=a.Transforms.eastNorthUpToFixedFrame(s,n,p),a.Matrix4.inverse(u,p)),c=N,l=h;l[0].longitude=i.west,l[0].latitude=i.south,l[1].longitude=i.west,l[1].latitude=i.north,l[2].longitude=i.east,l[2].latitude=i.south;for(var d=C,x=0;x<3;x++)r.Cartographic.toCartesian(l[x],n,d),d=a.Matrix4.multiplyByPointAsVector(f,d,d),c[x].x=d.x,c[x].y=d.y;s=a.Quaternion.fromAxisAngle(r.Cartesian3.UNIT_Z,-e,b);var L=a.Matrix3.fromQuaternion(s,T),w=t.length,g=Number.POSITIVE_INFINITY,S=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY;for(x=0;x<w;x++)d=a.Matrix4.multiplyByPointAsVector(f,t[x],d),d=a.Matrix3.multiplyByVector(L,d,d),g=Math.min(g,d.x),S=Math.min(S,d.y),A=Math.max(A,d.x),O=Math.max(O,d.y);var M=o.fromRotation(e,E),R=I;R[0].x=g,R[0].y=S,R[1].x=g,R[1].y=O,R[2].x=A,R[2].y=S;var v=c[0],V=c[2].x-v.x,P=c[1].y-v.y;for(x=0;x<3;x++){var G=R[x];o.multiplyByVector(M,G,G),G.x=(G.x-v.x)/V,G.y=(G.y-v.y)/P}return u=R[0],i=R[1],s=R[2],e=new Array(6),r.Cartesian2.pack(u,e),r.Cartesian2.pack(i,e,2),r.Cartesian2.pack(s,e,4),e},t.Geometry=d,t.GeometryAttribute=function(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT),this.componentDatatype=t.componentDatatype,this.componentsPerAttribute=t.componentsPerAttribute,this.normalize=e.defaultValue(t.normalize,!1),this.values=t.values},t.GeometryType=u,t.Matrix2=o,t.PrimitiveType=l}));