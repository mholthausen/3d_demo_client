define(["./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartesian2-bddc1162","./Transforms-6f81ad4c","./RuntimeError-2109023a","./WebGLConstants-76bb35d1","./ComponentDatatype-6d99a1ee","./GeometryAttribute-700c1da0","./EncodedCartesian3-4df2eabb","./IntersectionTests-7f3bcd5c","./Plane-b6058d9b","./WebMercatorProjection-df58d479","./arrayRemoveDuplicates-ebc732b0","./ArcType-dc1c5aee","./EllipsoidRhumbLine-c704bf4c","./EllipsoidGeodesic-30fae80b"],(function(e,a,t,n,i,r,s,o,l,u,c,C,d,p,h,g,f){"use strict";function m(a){a=e.defaultValue(a,e.defaultValue.EMPTY_OBJECT),this._ellipsoid=e.defaultValue(a.ellipsoid,n.Ellipsoid.WGS84),this._rectangle=e.defaultValue(a.rectangle,n.Rectangle.MAX_VALUE),this._projection=new i.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=e.defaultValue(a.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=e.defaultValue(a.numberOfLevelZeroTilesY,1)}Object.defineProperties(m.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),m.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},m.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},m.prototype.rectangleToNativeRectangle=function(a,i){var r=t.CesiumMath.toDegrees(a.west),s=t.CesiumMath.toDegrees(a.south),o=t.CesiumMath.toDegrees(a.east);return a=t.CesiumMath.toDegrees(a.north),e.defined(i)?(i.west=r,i.south=s,i.east=o,i.north=a,i):new n.Rectangle(r,s,o,a)},m.prototype.tileXYToNativeRectangle=function(e,a,n,i){return(i=this.tileXYToRectangle(e,a,n,i)).west=t.CesiumMath.toDegrees(i.west),i.south=t.CesiumMath.toDegrees(i.south),i.east=t.CesiumMath.toDegrees(i.east),i.north=t.CesiumMath.toDegrees(i.north),i},m.prototype.tileXYToRectangle=function(a,t,i,r){var s=this._rectangle,o=this.getNumberOfXTilesAtLevel(i),l=this.getNumberOfYTilesAtLevel(i);return o=a*(i=s.width/o)+s.west,a=(a+1)*i+s.west,i=s.height/l,l=s.north-t*i,i=s.north-(t+1)*i,e.defined(r)||(r=new n.Rectangle(o,i,a,l)),r.west=o,r.south=i,r.east=a,r.north=l,r},m.prototype.positionToTileXY=function(a,i,r){var s=this._rectangle;if(n.Rectangle.contains(s,a)){var o=this.getNumberOfXTilesAtLevel(i),l=this.getNumberOfYTilesAtLevel(i),u=s.width/o,c=s.height/l;return i=a.longitude,s.east<s.west&&(i+=t.CesiumMath.TWO_PI),o<=(u=(i-s.west)/u|0)&&(u=o-1),l<=(c=(s.north-a.latitude)/c|0)&&(c=l-1),e.defined(r)?(r.x=u,r.y=c,r):new n.Cartesian2(u,c)}};var w=new n.Cartesian3,y=new n.Cartesian3,v=new n.Cartographic,M=new n.Cartesian3,T=new n.Cartesian3,E=new i.BoundingSphere,_=new m,b=[new n.Cartographic,new n.Cartographic,new n.Cartographic,new n.Cartographic],O=new n.Cartesian2,P={};function k(e){n.Cartographic.fromRadians(e.east,e.north,0,b[0]),n.Cartographic.fromRadians(e.west,e.north,0,b[1]),n.Cartographic.fromRadians(e.east,e.south,0,b[2]),n.Cartographic.fromRadians(e.west,e.south,0,b[3]);for(var a=0,t=0,i=0,r=0,s=P._terrainHeightsMaxLevel,o=0;o<=s;++o){for(var l=!1,u=0;u<4;++u){var c=b[u];if(_.positionToTileXY(c,o,O),0===u)i=O.x,r=O.y;else if(i!==O.x||r!==O.y){l=!0;break}}if(l)break;a=i,t=r}if(0!==o)return{x:a,y:t,level:s<o?s:o-1}}P.initialize=function(){var a=P._initPromise;return e.defined(a)?a:(a=i.Resource.fetchJson(i.buildModuleUrl("Assets/approximateTerrainHeights.json")).then((function(e){P._terrainHeights=e})),P._initPromise=a)},P.getMinimumMaximumHeights=function(a,t){t=e.defaultValue(t,n.Ellipsoid.WGS84);var i=k(a),r=P._defaultMinTerrainHeight,s=P._defaultMaxTerrainHeight;return e.defined(i)&&(i=i.level+"-"+i.x+"-"+i.y,i=P._terrainHeights[i],e.defined(i)&&(r=i[0],s=i[1]),t.cartographicToCartesian(n.Rectangle.northeast(a,v),w),t.cartographicToCartesian(n.Rectangle.southwest(a,v),y),n.Cartesian3.midpoint(y,w,M),t=t.scaleToGeodeticSurface(M,T),r=e.defined(t)?(t=n.Cartesian3.distance(M,t),Math.min(r,-t)):P._defaultMinTerrainHeight),{minimumTerrainHeight:r=Math.max(P._defaultMinTerrainHeight,r),maximumTerrainHeight:s}},P.getBoundingSphere=function(a,t){t=e.defaultValue(t,n.Ellipsoid.WGS84);var r=k(a),s=P._defaultMaxTerrainHeight;e.defined(r)&&(o=r.level+"-"+r.x+"-"+r.y,o=P._terrainHeights[o],e.defined(o)&&(s=o[1]));var o=i.BoundingSphere.fromRectangle3D(a,t,0);return i.BoundingSphere.fromRectangle3D(a,t,s,E),i.BoundingSphere.union(o,E,o)},P._terrainHeightsMaxLevel=6,P._defaultMaxTerrainHeight=9e3,P._defaultMinTerrainHeight=-1e5,P._terrainHeights=void 0,P._initPromise=void 0,Object.defineProperties(P,{initialized:{get:function(){return e.defined(P._terrainHeights)}}});var A=[i.GeographicProjection,d.WebMercatorProjection],L=A.length,S=Math.cos(t.CesiumMath.toRadians(30)),I=Math.cos(t.CesiumMath.toRadians(150));function x(a){var t=(a=e.defaultValue(a,e.defaultValue.EMPTY_OBJECT)).positions;this.width=e.defaultValue(a.width,1),this._positions=t,this.granularity=e.defaultValue(a.granularity,9999),this.loop=e.defaultValue(a.loop,!1),this.arcType=e.defaultValue(a.arcType,h.ArcType.GEODESIC),this._ellipsoid=n.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(x.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+n.Ellipsoid.packedLength+1+1}}}),x.setProjectionAndEllipsoid=function(e,a){for(var t=0,n=0;n<L;n++)if(a instanceof A[n]){t=n;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var N=new n.Cartesian3,R=new n.Cartesian3,D=new n.Cartesian3;function z(e,a,t,i,r){var s=F(i,e,0,N);return t=F(i,e,t,R),a=F(i,a,0,D),t=q(t,s,R),s=q(a,s,D),n.Cartesian3.cross(s,t,r),n.Cartesian3.normalize(r,r)}var H=new n.Cartographic,B=new n.Cartesian3,j=new n.Cartesian3,G=new n.Cartesian3;function V(e,a,t,i,r,s,o,l,u,c,C){var d;if(0!==r&&(s===h.ArcType.GEODESIC?d=new f.EllipsoidGeodesic(e,a,o):s===h.ArcType.RHUMB&&(d=new g.EllipsoidRhumbLine(e,a,o)),!((s=d.surfaceDistance)<r)))for(var p=z(e,a,i,o,G),m=s/(r=Math.ceil(s/r)),w=m,y=r-1,v=l.length,M=0;M<y;M++){var T=d.interpolateUsingSurfaceDistance(w,H),E=F(o,T,t,B),_=F(o,T,i,j);n.Cartesian3.pack(p,l,v),n.Cartesian3.pack(E,u,v),n.Cartesian3.pack(_,c,v),C.push(T.latitude),C.push(T.longitude),v+=3,w+=m}}var Y=new n.Cartographic;function F(e,a,t,i){return n.Cartographic.clone(a,Y),Y.height=t,n.Cartographic.toCartesian(Y,e,i)}function q(e,a,t){return n.Cartesian3.subtract(e,a,t),n.Cartesian3.normalize(t,t),t}function X(e,a,t,i){return i=q(e,a,i),i=n.Cartesian3.cross(i,t,i),i=n.Cartesian3.normalize(i,i),n.Cartesian3.cross(t,i,i)}x.pack=function(a,t,i){var r=e.defaultValue(i,0),s=a._positions,o=s.length;t[r++]=o;for(var l=0;l<o;++l){var u=s[l];n.Cartesian3.pack(u,t,r),r+=3}return t[r++]=a.granularity,t[r++]=a.loop?1:0,t[r++]=a.arcType,n.Ellipsoid.pack(a._ellipsoid,t,r),r+=n.Ellipsoid.packedLength,t[r++]=a._projectionIndex,t[r++]=a._scene3DOnly?1:0,t},x.unpack=function(a,t,i){for(var r=e.defaultValue(t,0),s=a[r++],o=new Array(s),l=0;l<s;l++)o[l]=n.Cartesian3.unpack(a,r),r+=3;var u=a[r++],c=1===a[r++],C=a[r++],d=n.Ellipsoid.unpack(a,r);r+=n.Ellipsoid.packedLength;var p=a[r++];return t=1===a[r++],e.defined(i)||(i=new x({positions:o})),i._positions=o,i.granularity=u,i.loop=c,i.arcType=C,i._ellipsoid=d,i._projectionIndex=p,i._scene3DOnly=t,i};var W=new n.Cartesian3,U=new n.Cartesian3,Z=new n.Cartesian3,J=new n.Cartesian3;function Q(e,a,i,r,s){return e=X(e,a,i=q(i,a,J),W),a=X(r,a,i,U),t.CesiumMath.equalsEpsilon(n.Cartesian3.dot(e,a),-1,t.CesiumMath.EPSILON5)?(s=n.Cartesian3.cross(i,e,s),n.Cartesian3.normalize(s,s)):(s=n.Cartesian3.add(a,e,s),s=n.Cartesian3.normalize(s,s),i=n.Cartesian3.cross(i,s,Z),n.Cartesian3.dot(a,i)<0&&(s=n.Cartesian3.negate(s,s)),s)}var K=C.Plane.fromPointNormal(n.Cartesian3.ZERO,n.Cartesian3.UNIT_Y),$=new n.Cartesian3,ee=new n.Cartesian3,ae=new n.Cartesian3,te=new n.Cartesian3,ne=new n.Cartesian3,ie=new n.Cartesian3,re=new n.Cartographic,se=new n.Cartographic,oe=new n.Cartographic;x.createGeometry=function(a){var r,s,C,d,f,m=!a._scene3DOnly,w=a.loop,y=a._ellipsoid,v=a.granularity,M=a.arcType,T=new A[a._projectionIndex](y),E=1e3,_=a._positions,b=_.length;2===b&&(w=!1);for(var O,k,L,I=new g.EllipsoidRhumbLine(void 0,void 0,y),x=[_[0]],N=0;N<b-1;N++)s=_[N],C=_[N+1],O=c.IntersectionTests.lineSegmentPlane(s,C,K,ie),!e.defined(O)||n.Cartesian3.equalsEpsilon(O,s,t.CesiumMath.EPSILON7)||n.Cartesian3.equalsEpsilon(O,C,t.CesiumMath.EPSILON7)||(a.arcType===h.ArcType.GEODESIC?x.push(n.Cartesian3.clone(O)):a.arcType===h.ArcType.RHUMB&&(L=y.cartesianToCartographic(O,re).longitude,d=y.cartesianToCartographic(s,re),f=y.cartesianToCartographic(C,se),I.setEndPoints(d,f),k=I.findIntersectionWithLongitude(L,oe),O=y.cartographicToCartesian(k,ie),!e.defined(O)||n.Cartesian3.equalsEpsilon(O,s,t.CesiumMath.EPSILON7)||n.Cartesian3.equalsEpsilon(O,C,t.CesiumMath.EPSILON7)||x.push(n.Cartesian3.clone(O)))),x.push(C);w&&(s=_[b-1],C=_[0],O=c.IntersectionTests.lineSegmentPlane(s,C,K,ie),!e.defined(O)||n.Cartesian3.equalsEpsilon(O,s,t.CesiumMath.EPSILON7)||n.Cartesian3.equalsEpsilon(O,C,t.CesiumMath.EPSILON7)||(a.arcType===h.ArcType.GEODESIC?x.push(n.Cartesian3.clone(O)):a.arcType===h.ArcType.RHUMB&&(L=y.cartesianToCartographic(O,re).longitude,d=y.cartesianToCartographic(s,re),f=y.cartesianToCartographic(C,se),I.setEndPoints(d,f),k=I.findIntersectionWithLongitude(L,oe),O=y.cartographicToCartesian(k,ie),!e.defined(O)||n.Cartesian3.equalsEpsilon(O,s,t.CesiumMath.EPSILON7)||n.Cartesian3.equalsEpsilon(O,C,t.CesiumMath.EPSILON7)||x.push(n.Cartesian3.clone(O)))));var R=x.length,D=new Array(R);for(N=0;N<R;N++){var H=n.Cartographic.fromCartesian(x[N],y);H.height=0,D[N]=H}if(!((R=(D=p.arrayRemoveDuplicates(D,n.Cartographic.equalsEpsilon)).length)<2)){var B=[],j=[],G=[],Y=[],X=$,W=ee,U=ae,Z=te,J=ne,le=D[0],ue=D[1];for(X=F(y,D[R-1],0,X),Z=F(y,ue,0,Z),W=F(y,le,0,W),U=F(y,le,E,U),J=w?Q(X,W,U,Z,J):z(le,ue,E,y,J),n.Cartesian3.pack(J,j,0),n.Cartesian3.pack(W,G,0),n.Cartesian3.pack(U,Y,0),B.push(le.latitude),B.push(le.longitude),V(le,ue,0,E,v,M,y,j,G,Y,B),N=1;N<R-1;++N){X=n.Cartesian3.clone(W,X),W=n.Cartesian3.clone(Z,W);var ce=D[N];F(y,ce,E,U),F(y,D[N+1],0,Z),Q(X,W,U,Z,J),r=j.length,n.Cartesian3.pack(J,j,r),n.Cartesian3.pack(W,G,r),n.Cartesian3.pack(U,Y,r),B.push(ce.latitude),B.push(ce.longitude),V(D[N],D[N+1],0,E,v,M,y,j,G,Y,B)}var de=D[R-1],pe=D[R-2];if(W=F(y,de,0,W),U=F(y,de,E,U),J=w?(ue=D[0],Q(X=F(y,pe,0,X),W,U,Z=F(y,ue,0,Z),J)):z(pe,de,E,y,J),r=j.length,n.Cartesian3.pack(J,j,r),n.Cartesian3.pack(W,G,r),n.Cartesian3.pack(U,Y,r),B.push(de.latitude),B.push(de.longitude),w){for(V(de,le,0,E,v,M,y,j,G,Y,B),r=j.length,N=0;N<3;++N)j[r+N]=j[N],G[r+N]=G[N],Y[r+N]=Y[N];B.push(le.latitude),B.push(le.longitude)}return function(e,a,r,s,c,C,d){var p,h,g,f,m,w,y=a._ellipsoid,v=r.length/3-1,M=8*v,T=4*M,E=new(65535<M?Uint32Array:Uint16Array)(36*v),_=new Float64Array(3*M),b=new Float32Array(T),O=new Float32Array(T),k=new Float32Array(T),A=new Float32Array(T),L=new Float32Array(T);d&&(g=new Float32Array(T),f=new Float32Array(T),m=new Float32Array(T),w=new Float32Array(2*M));var I=C.length/2,x=0,N=Me;N.height=0;var R=Te;R.height=0;var D=Ee,z=_e;if(d)for(h=0,p=1;p<I;p++)N.latitude=C[h],N.longitude=C[h+1],R.latitude=C[h+2],R.longitude=C[h+3],D=a.project(N,D),z=a.project(R,z),x+=n.Cartesian3.distance(D,z),h+=2;var H=s.length/3;z=n.Cartesian3.unpack(s,0,z);var B,j=0;for(h=3,p=1;p<H;p++)D=n.Cartesian3.clone(z,D),z=n.Cartesian3.unpack(s,h,z),j+=n.Cartesian3.distance(D,z),h+=3;h=3;var G=0,V=0,Y=0,F=0,X=!1,W=n.Cartesian3.unpack(r,0,Oe),U=n.Cartesian3.unpack(s,0,_e),Z=n.Cartesian3.unpack(c,0,ke);e&&Ce(Z,ga=n.Cartesian3.unpack(r,r.length-6,be),W,U)&&(Z=n.Cartesian3.negate(Z,Z));var J,Q,K,$,ee,ae,te,ne=0,ie=0,re=0;for(p=0;p<v;p++){var se=n.Cartesian3.clone(W,be),oe=n.Cartesian3.clone(U,Ee),le=n.Cartesian3.clone(Z,Pe);X&&(le=n.Cartesian3.negate(le,le)),W=n.Cartesian3.unpack(r,h,Oe),U=n.Cartesian3.unpack(s,h,_e),X=Ce(Z=n.Cartesian3.unpack(c,h,ke),se,W,U),N.latitude=C[G],N.longitude=C[G+1],R.latitude=C[G+2],R.longitude=C[G+3],d&&(pa=function(e,a){var n=Math.abs(e.longitude),i=Math.abs(a.longitude);if(t.CesiumMath.equalsEpsilon(n,t.CesiumMath.PI,t.CesiumMath.EPSILON11)){var r=t.CesiumMath.sign(a.longitude);return e.longitude=r*(n-t.CesiumMath.EPSILON11),1}return t.CesiumMath.equalsEpsilon(i,t.CesiumMath.PI,t.CesiumMath.EPSILON11)?(e=t.CesiumMath.sign(e.longitude),a.longitude=e*(i-t.CesiumMath.EPSILON11),2):0}(N,R),J=a.project(N,Re),(na=q(Q=a.project(R,De),J,We)).y=Math.abs(na.y),K=ze,$=He,0===pa||n.Cartesian3.dot(na,n.Cartesian3.UNIT_Y)>S?(K=ge(a,N,le,J,ze),$=ge(a,R,Z,Q,He)):1===pa?($=ge(a,R,Z,Q,He),K.x=0,K.y=t.CesiumMath.sign(N.longitude-Math.abs(R.longitude)),K.z=0):(K=ge(a,N,le,J,ze),$.x=0,$.y=t.CesiumMath.sign(N.longitude-R.longitude),$.z=0));var ue=n.Cartesian3.distance(oe,U),ce=u.EncodedCartesian3.fromCartesian(se,qe),de=n.Cartesian3.subtract(W,se,Be),pe=n.Cartesian3.normalize(de,Ve),he=n.Cartesian3.subtract(oe,se,je);he=n.Cartesian3.normalize(he,he);var fe=n.Cartesian3.cross(pe,he,Ve);fe=n.Cartesian3.normalize(fe,fe);var me=n.Cartesian3.cross(he,le,Ye);me=n.Cartesian3.normalize(me,me);var ye=n.Cartesian3.subtract(U,W,Ge);ye=n.Cartesian3.normalize(ye,ye);var ea=n.Cartesian3.cross(Z,ye,Fe);ea=n.Cartesian3.normalize(ea,ea);var aa=ue/j,ta=ne/j,na=0,ia=0,ra=0;for(d&&(na=n.Cartesian3.distance(J,Q),ee=u.EncodedCartesian3.fromCartesian(J,Xe),ae=n.Cartesian3.subtract(Q,J,We),da=(te=n.Cartesian3.normalize(ae,Ue)).x,te.x=te.y,te.y=-da,ia=na/x,ra=ie/x),B=0;B<8;B++){var sa=F+4*B,oa=V+2*B,la=sa+3,ua=B<4?1:-1,ca=2===B||3===B||6===B||7===B?1:-1;n.Cartesian3.pack(ce.high,b,sa),b[la]=de.x,n.Cartesian3.pack(ce.low,O,sa),O[la]=de.y,n.Cartesian3.pack(me,k,sa),k[la]=de.z,n.Cartesian3.pack(ea,A,sa),A[la]=aa*ua,n.Cartesian3.pack(fe,L,sa);var Ca=ta*ca;0===Ca&&ca<0&&(Ca=9),L[la]=Ca,d&&(g[sa]=ee.high.x,g[sa+1]=ee.high.y,g[sa+2]=ee.low.x,g[sa+3]=ee.low.y,m[sa]=-K.y,m[sa+1]=K.x,m[sa+2]=$.y,m[sa+3]=-$.x,f[sa]=ae.x,f[sa+1]=ae.y,f[sa+2]=te.x,f[sa+3]=te.y,w[oa]=ia*ua,0==(Ca=ra*ca)&&ca<0&&(Ca=9),w[oa+1]=Ca)}var da,pa=xe;pe=Ne,he=Se,le=Ie,ye=n.Rectangle.fromCartographicArray(Ae,Le),re+=ye=(da=P.getMinimumMaximumHeights(ye,y)).minimumTerrainHeight,re+=da=da.maximumTerrainHeight,we(se,oe,ye,da,pa,he),we(W,U,ye,da,pe,le),da=n.Cartesian3.multiplyByScalar(fe,t.CesiumMath.EPSILON5,Ze),n.Cartesian3.add(pa,da,pa),n.Cartesian3.add(pe,da,pe),n.Cartesian3.add(he,da,he),n.Cartesian3.add(le,da,le),ve(pa,pe),ve(he,le),n.Cartesian3.pack(pa,_,Y),n.Cartesian3.pack(pe,_,Y+3),n.Cartesian3.pack(le,_,Y+6),n.Cartesian3.pack(he,_,Y+9),da=n.Cartesian3.multiplyByScalar(fe,-2*t.CesiumMath.EPSILON5,Ze),n.Cartesian3.add(pa,da,pa),n.Cartesian3.add(pe,da,pe),n.Cartesian3.add(he,da,he),n.Cartesian3.add(le,da,le),ve(pa,pe),ve(he,le),n.Cartesian3.pack(pa,_,Y+12),n.Cartesian3.pack(pe,_,Y+15),n.Cartesian3.pack(le,_,Y+18),n.Cartesian3.pack(he,_,Y+21),G+=2,h+=3,V+=16,Y+=24,F+=32,ne+=ue,ie+=na}var ha=h=0;for(p=0;p<v;p++){for(B=0;B<Ke;B++)E[h+B]=Qe[B]+ha;ha+=8,h+=Ke}e=Je,i.BoundingSphere.fromVertices(r,n.Cartesian3.ZERO,3,e[0]),i.BoundingSphere.fromVertices(s,n.Cartesian3.ZERO,3,e[1]);var ga=i.BoundingSphere.fromBoundingSpheres(e);return ga.radius+=re/(2*v),e={position:new l.GeometryAttribute({componentDatatype:o.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:_}),startHiAndForwardOffsetX:$e(b),startLoAndForwardOffsetY:$e(O),startNormalAndForwardOffsetZ:$e(k),endNormalAndTextureCoordinateNormalizationX:$e(A),rightNormalAndTextureCoordinateNormalizationY:$e(L)},d&&(e.startHiLo2D=$e(g),e.offsetAndRight2D=$e(f),e.startEndNormals2D=$e(m),e.texcoordNormalization2D=new l.GeometryAttribute({componentDatatype:o.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:w})),new l.Geometry({attributes:e,indices:E,boundingSphere:ga})}(w,T,G,Y,j,B,m)}};var le=new n.Cartesian3,ue=new i.Matrix3,ce=new i.Quaternion;function Ce(e,a,r,s){return a=q(r,a,le),a=n.Cartesian3.dot(a,e),(S<a||a<I)&&(r=q(s,r,J),a=a<I?t.CesiumMath.PI_OVER_TWO:-t.CesiumMath.PI_OVER_TWO,a=i.Quaternion.fromAxisAngle(r,a,ce),a=i.Matrix3.fromQuaternion(a,ue),i.Matrix3.multiplyByVector(a,e,e),!0)}var de=new n.Cartographic,pe=new n.Cartesian3,he=new n.Cartesian3;function ge(e,a,i,r,s){var o=n.Cartographic.toCartesian(a,e._ellipsoid,pe),l=n.Cartesian3.add(o,i,he),u=!1,c=e._ellipsoid,C=c.cartesianToCartographic(l,de);return Math.abs(a.longitude-C.longitude)>t.CesiumMath.PI_OVER_TWO&&(u=!0,l=n.Cartesian3.subtract(o,i,he),C=c.cartesianToCartographic(l,de)),C.height=0,C=e.project(C,s),(s=n.Cartesian3.subtract(C,r,s)).z=0,s=n.Cartesian3.normalize(s,s),u&&n.Cartesian3.negate(s,s),s}var fe=new n.Cartesian3,me=new n.Cartesian3;function we(e,a,t,i,r,s){var o=n.Cartesian3.subtract(a,e,fe);n.Cartesian3.normalize(o,o),t-=0,t=n.Cartesian3.multiplyByScalar(o,t,me),n.Cartesian3.add(e,t,r),i-=1e3,t=n.Cartesian3.multiplyByScalar(o,i,me),n.Cartesian3.add(a,t,s)}var ye=new n.Cartesian3;function ve(e,a){var i=C.Plane.getPointDistance(K,e),r=C.Plane.getPointDistance(K,a),s=ye;t.CesiumMath.equalsEpsilon(i,0,t.CesiumMath.EPSILON2)?(s=q(a,e,s),n.Cartesian3.multiplyByScalar(s,t.CesiumMath.EPSILON2,s),n.Cartesian3.add(e,s,e)):t.CesiumMath.equalsEpsilon(r,0,t.CesiumMath.EPSILON2)&&(s=q(e,a,s),n.Cartesian3.multiplyByScalar(s,t.CesiumMath.EPSILON2,s),n.Cartesian3.add(a,s,a))}var Me=new n.Cartographic,Te=new n.Cartographic,Ee=new n.Cartesian3,_e=new n.Cartesian3,be=new n.Cartesian3,Oe=new n.Cartesian3,Pe=new n.Cartesian3,ke=new n.Cartesian3,Ae=[Me,Te],Le=new n.Rectangle,Se=new n.Cartesian3,Ie=new n.Cartesian3,xe=new n.Cartesian3,Ne=new n.Cartesian3,Re=new n.Cartesian3,De=new n.Cartesian3,ze=new n.Cartesian3,He=new n.Cartesian3,Be=new n.Cartesian3,je=new n.Cartesian3,Ge=new n.Cartesian3,Ve=new n.Cartesian3,Ye=new n.Cartesian3,Fe=new n.Cartesian3,qe=new u.EncodedCartesian3,Xe=new u.EncodedCartesian3,We=new n.Cartesian3,Ue=new n.Cartesian3,Ze=new n.Cartesian3,Je=[new i.BoundingSphere,new i.BoundingSphere],Qe=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],Ke=Qe.length;function $e(e){return new l.GeometryAttribute({componentDatatype:o.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return x._projectNormal=ge,function(a,t){return P.initialize().then((function(){return e.defined(t)&&(a=x.unpack(a,t)),x.createGeometry(a)}))}}));