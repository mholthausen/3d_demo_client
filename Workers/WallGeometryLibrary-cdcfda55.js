define(["exports","./arrayRemoveDuplicates-216006b0","./Cartesian2-49b1de22","./when-54c2dc71","./Math-44e92d6b","./PolylinePipeline-eb80587e"],(function(e,i,t,r,n,a){"use strict";var o={},l=new t.Cartographic,s=new t.Cartographic,h=new Array(2),g=new Array(2),p={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};o.computePositions=function(e,o,u,c,d,y){var m=function(e,a,o,h){var g=(a=i.arrayRemoveDuplicates(a,t.Cartesian3.equalsEpsilon)).length;if(!(g<2)){var p=r.defined(h),u=r.defined(o),c=new Array(g),d=new Array(g),y=new Array(g),m=a[0];c[0]=m;var v=e.cartesianToCartographic(m,l);u&&(v.height=o[0]),d[0]=v.height,y[0]=p?h[0]:0;for(var P,f,A=d[0]===y[0],C=1,w=1;w<g;++w){var b=a[w],M=e.cartesianToCartographic(b,s);u&&(M.height=o[w]),A=A&&0===M.height,P=v,f=M,n.CesiumMath.equalsEpsilon(P.latitude,f.latitude,n.CesiumMath.EPSILON10)&&n.CesiumMath.equalsEpsilon(P.longitude,f.longitude,n.CesiumMath.EPSILON10)?v.height<M.height&&(d[C-1]=M.height):(c[C]=b,d[C]=M.height,y[C]=p?h[w]:0,A=A&&d[C]===y[C],t.Cartographic.clone(M,v),++C)}if(!(A||C<2))return c.length=C,d.length=C,y.length=C,{positions:c,topHeights:d,bottomHeights:y}}}(e,o,u,c);if(r.defined(m)){o=m.positions,u=m.topHeights,c=m.bottomHeights;var v,P,f=o.length,A=(m=f-2,n.CesiumMath.chordLength(d,e.maximumRadius)),C=p;if(C.minDistance=A,C.ellipsoid=e,y){for(var w=0,b=0;b<f-1;b++)w+=a.PolylinePipeline.numberOfPoints(o[b],o[b+1],A)+1;v=new Float64Array(3*w),P=new Float64Array(3*w);var M=h,E=g;C.positions=M,C.height=E;var F=0;for(b=0;b<f-1;b++){M[0]=o[b],M[1]=o[b+1],E[0]=u[b],E[1]=u[b+1];var H=a.PolylinePipeline.generateArc(C);v.set(H,F),E[0]=c[b],E[1]=c[b+1],P.set(a.PolylinePipeline.generateArc(C),F),F+=H.length}}else C.positions=o,C.height=u,v=new Float64Array(a.PolylinePipeline.generateArc(C)),C.height=c,P=new Float64Array(a.PolylinePipeline.generateArc(C));return{bottomPositions:P,topPositions:v,numCorners:m}}},e.WallGeometryLibrary=o}));