define(["./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartesian2-bddc1162","./Transforms-6f81ad4c","./RuntimeError-2109023a","./WebGLConstants-76bb35d1","./ComponentDatatype-6d99a1ee","./GeometryAttribute-700c1da0","./GeometryAttributes-4fcfcf40","./IndexDatatype-53503fee","./IntersectionTests-7f3bcd5c","./Plane-b6058d9b","./arrayRemoveDuplicates-ebc732b0","./EllipsoidRhumbLine-c704bf4c","./EllipsoidGeodesic-30fae80b","./PolylinePipeline-7685bebd","./WallGeometryLibrary-af3be376"],(function(e,i,t,a,n,r,o,s,l,d,m,u,p,f,c,h,g,y){"use strict";var _=new a.Cartesian3,E=new a.Cartesian3;function b(i){var n=(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).positions,r=i.maximumHeights,o=i.minimumHeights,s=e.defaultValue(i.granularity,t.CesiumMath.RADIANS_PER_DEGREE);i=e.defaultValue(i.ellipsoid,a.Ellipsoid.WGS84),this._positions=n,this._minimumHeights=o,this._maximumHeights=r,this._granularity=s,this._ellipsoid=a.Ellipsoid.clone(i),this._workerName="createWallOutlineGeometry",n=1+n.length*a.Cartesian3.packedLength+2,e.defined(o)&&(n+=o.length),e.defined(r)&&(n+=r.length),this.packedLength=n+a.Ellipsoid.packedLength+1}b.pack=function(i,t,n){var r;n=e.defaultValue(n,0);var o=i._positions,s=o.length;for(t[n++]=s,r=0;r<s;++r,n+=a.Cartesian3.packedLength)a.Cartesian3.pack(o[r],t,n);var l=i._minimumHeights;if(s=e.defined(l)?l.length:0,t[n++]=s,e.defined(l))for(r=0;r<s;++r)t[n++]=l[r];var d=i._maximumHeights;if(s=e.defined(d)?d.length:0,t[n++]=s,e.defined(d))for(r=0;r<s;++r)t[n++]=d[r];return a.Ellipsoid.pack(i._ellipsoid,t,n),t[n+=a.Ellipsoid.packedLength]=i._granularity,t};var v=a.Ellipsoid.clone(a.Ellipsoid.UNIT_SPHERE),C={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:v,granularity:void 0};return b.unpack=function(i,t,n){t=e.defaultValue(t,0);for(var r,o,s=i[t++],l=new Array(s),d=0;d<s;++d,t+=a.Cartesian3.packedLength)l[d]=a.Cartesian3.unpack(i,t);if(0<(s=i[t++]))for(r=new Array(s),d=0;d<s;++d)r[d]=i[t++];if(0<(s=i[t++]))for(o=new Array(s),d=0;d<s;++d)o[d]=i[t++];var m=a.Ellipsoid.unpack(i,t,v),u=i[t+=a.Ellipsoid.packedLength];return e.defined(n)?(n._positions=l,n._minimumHeights=r,n._maximumHeights=o,n._ellipsoid=a.Ellipsoid.clone(m,n._ellipsoid),n._granularity=u,n):(C.positions=l,C.minimumHeights=r,C.maximumHeights=o,C.granularity=u,new b(C))},b.fromConstantHeights=function(i){var t=(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).positions,a=i.minimumHeight,n=i.maximumHeight,r=e.defined(a),o=e.defined(n);if(r||o)for(var s=t.length,l=r?new Array(s):void 0,d=o?new Array(s):void 0,m=0;m<s;++m)r&&(l[m]=a),o&&(d[m]=n);return new b({positions:t,maximumHeights:d,minimumHeights:l,ellipsoid:i.ellipsoid})},b.createGeometry=function(i){var r=i._positions,o=i._minimumHeights,u=i._maximumHeights,p=i._granularity;if(i=i._ellipsoid,o=y.WallGeometryLibrary.computePositions(i,r,u,o,p,!1),e.defined(o)){var f=o.bottomPositions,c=o.topPositions,h=c.length,g=(p=2*h,new Float64Array(p)),b=0;for(h/=3,w=0;w<h;++w){var v=3*w,C=a.Cartesian3.fromArray(c,v,_);v=a.Cartesian3.fromArray(f,v,E),g[b++]=v.x,g[b++]=v.y,g[b++]=v.z,g[b++]=C.x,g[b++]=C.y,g[b++]=C.z}o=new d.GeometryAttributes({position:new l.GeometryAttribute({componentDatatype:s.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:g})});for(var H=p/3,A=(p=2*H-4+H,m.IndexDatatype.createTypedArray(H,p)),k=0,w=0;w<H-2;w+=2){var G=w,L=w+2,x=a.Cartesian3.fromArray(g,3*G,_),P=a.Cartesian3.fromArray(g,3*L,E);a.Cartesian3.equalsEpsilon(x,P,t.CesiumMath.EPSILON10)||(x=w+1,P=w+3,A[k++]=x,A[k++]=G,A[k++]=x,A[k++]=P,A[k++]=G,A[k++]=L)}return A[k++]=H-2,A[k++]=H-1,new l.Geometry({attributes:o,indices:A,primitiveType:l.PrimitiveType.LINES,boundingSphere:new n.BoundingSphere.fromVertices(g)})}},function(i,t){return e.defined(t)&&(i=b.unpack(i,t)),i._ellipsoid=a.Ellipsoid.clone(i._ellipsoid),b.createGeometry(i)}}));