define(["./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartesian2-bddc1162","./WebGLConstants-76bb35d1","./AttributeCompression-9fc99391","./IndexDatatype-53503fee","./createTaskProcessorWorker"],(function(a,e,r,n,t,i,s,c){"use strict";var u=32767,o=new n.Cartographic,f=new n.Cartesian3,p=new n.Rectangle,C=new n.Ellipsoid,d=new n.Cartesian3,b={min:void 0,max:void 0},w=new n.Cartesian3,h=new n.Cartesian3,l=new n.Cartesian3,y=new n.Cartesian3,k=new n.Cartesian3;return c((function(a,e){var t=new Uint16Array(a.positions),c=new Uint16Array(a.widths),v=new Uint32Array(a.counts),A=new Uint16Array(a.batchIds);!function(a){a=new Float64Array(a);var e=0;b.min=a[e++],b.max=a[e++],n.Rectangle.unpack(a,2,p),e+=n.Rectangle.packedLength,n.Ellipsoid.unpack(a,e,C),e+=n.Ellipsoid.packedLength,n.Cartesian3.unpack(a,e,d)}(a.packedBuffer);for(var g=d,m=function(a,e,t,s,c){var p=a.length/3,C=a.subarray(0,p),d=a.subarray(p,2*p),b=a.subarray(2*p,3*p);i.AttributeCompression.zigZagDeltaDecode(C,d,b);for(var w=new Float64Array(a.length),h=0;h<p;++h){var l=C[h],y=d[h],k=b[h];l=r.CesiumMath.lerp(e.west,e.east,l/u),y=r.CesiumMath.lerp(e.south,e.north,y/u),k=r.CesiumMath.lerp(t,s,k/u),k=n.Cartographic.fromRadians(l,y,k,o),k=c.cartographicToCartesian(k,f),n.Cartesian3.pack(k,w,3*h)}return w}(t,p,b.min,b.max,C),x=(t=4*(a=m.length/3)-4,new Float32Array(3*t)),E=new Float32Array(3*t),D=new Float32Array(3*t),I=new Float32Array(2*t),T=new Uint16Array(t),U=0,F=0,N=0,R=0,M=v.length,P=0;P<M;++P){for(var L,S=v[P],_=c[P],G=A[P],W=0;W<S;++W){0===W?(z=n.Cartesian3.unpack(m,3*R,w),B=n.Cartesian3.unpack(m,3*(R+1),h),L=n.Cartesian3.subtract(z,B,l),n.Cartesian3.add(z,L,L)):L=n.Cartesian3.unpack(m,3*(R+W-1),l);var B,z,H,O=n.Cartesian3.unpack(m,3*(R+W),y);W===S-1?(B=n.Cartesian3.unpack(m,3*(R+S-1),w),z=n.Cartesian3.unpack(m,3*(R+S-2),h),H=n.Cartesian3.subtract(B,z,k),n.Cartesian3.add(B,H,H)):H=n.Cartesian3.unpack(m,3*(R+W+1),k),n.Cartesian3.subtract(L,g,L),n.Cartesian3.subtract(O,g,O),n.Cartesian3.subtract(H,g,H);for(var Y=W===S-1?2:4,Z=0===W?2:0;Z<Y;++Z){n.Cartesian3.pack(O,x,U),n.Cartesian3.pack(L,E,U),n.Cartesian3.pack(H,D,U),U+=3;var j=Z-2<0?-1:1;I[F++]=Z%2*2-1,I[F++]=j*_,T[N++]=G}}R+=S}var q=s.IndexDatatype.createTypedArray(t,6*a-6),J=0,K=0;for(M=a-1,P=0;P<M;++P)q[K++]=J,q[K++]=J+2,q[K++]=J+1,q[K++]=J+1,q[K++]=J+2,q[K++]=J+3,J+=4;return e.push(x.buffer,E.buffer,D.buffer),e.push(I.buffer,T.buffer,q.buffer),{indexDatatype:2===q.BYTES_PER_ELEMENT?s.IndexDatatype.UNSIGNED_SHORT:s.IndexDatatype.UNSIGNED_INT,currentPositions:x.buffer,previousPositions:E.buffer,nextPositions:D.buffer,expandAndWidth:I.buffer,batchIds:T.buffer,indices:q.buffer}}))}));